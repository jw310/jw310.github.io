<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Javascript 的一些觀念整理 | Jw的學習大小事</title><meta name="description" content="Javascript 的一些觀念整理"><meta name="keywords" content="Javascript"><meta name="author" content="jerry wu"><meta name="copyright" content="jerry wu"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Javascript 的一些觀念整理"><meta name="twitter:description" content="Javascript 的一些觀念整理"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="Javascript 的一些觀念整理"><meta property="og:url" content="https://jw310.github.io/2020/07/17/Javascript-concept/"><meta property="og:site_name" content="Jw的學習大小事"><meta property="og:description" content="Javascript 的一些觀念整理"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://jw310.github.io/2020/07/17/Javascript-concept/"><link rel="prev" title="JavaSript 執行環境(Execution_context)與堆疊" href="https://jw310.github.io/2020/07/17/Javascript-Execution-context/"><link rel="next" title="物件(Object)資料處理" href="https://jw310.github.io/2020/07/17/Object-key-value/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '鍵將本頁加入書籤'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Jw的學習大小事</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.gif" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">36</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">標籤</div><div class="length_num">43</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分類</div><div class="length_num">27</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目錄</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Javascript-觀念整理"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Javascript 觀念整理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#塊級作用域"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">塊級作用域</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#變數宣告"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">變數宣告</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#ES5-var"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">ES5 var</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#ES6-let-與-const"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">ES6 let 與 const</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Function-函式"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">Function(函式)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#函式組成"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">函式組成</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#立即函式-IIFE"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">立即函式(IIFE)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Callback-回調"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">Callback(回調)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#純粹函式-Pure-Functions-與副作用-Side-Effects-概念"><span class="toc_mobile_items-number">1.3.4.</span> <span class="toc_mobile_items-text">純粹函式(Pure Functions)與副作用(Side Effects)概念</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#副作用"><span class="toc_mobile_items-number">1.3.4.1.</span> <span class="toc_mobile_items-text">副作用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#純粹函式"><span class="toc_mobile_items-number">1.3.4.2.</span> <span class="toc_mobile_items-text">純粹函式</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#箭頭函式"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">箭頭函式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#提升-Hoisting"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">提升(Hoisting)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#解構賦值"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">解構賦值</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#陣列"><span class="toc_mobile_items-number">1.6.1.</span> <span class="toc_mobile_items-text">陣列</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#物件"><span class="toc_mobile_items-number">1.6.2.</span> <span class="toc_mobile_items-text">物件</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目錄</div><div class="sidebar-toc__progress"><span class="progress-notice">你已經讀了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Javascript-觀念整理"><span class="toc-number">1.</span> <span class="toc-text">Javascript 觀念整理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#塊級作用域"><span class="toc-number">1.1.</span> <span class="toc-text">塊級作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#變數宣告"><span class="toc-number">1.2.</span> <span class="toc-text">變數宣告</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ES5-var"><span class="toc-number">1.2.1.</span> <span class="toc-text">ES5 var</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6-let-與-const"><span class="toc-number">1.2.2.</span> <span class="toc-text">ES6 let 與 const</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Function-函式"><span class="toc-number">1.3.</span> <span class="toc-text">Function(函式)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函式組成"><span class="toc-number">1.3.1.</span> <span class="toc-text">函式組成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#立即函式-IIFE"><span class="toc-number">1.3.2.</span> <span class="toc-text">立即函式(IIFE)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Callback-回調"><span class="toc-number">1.3.3.</span> <span class="toc-text">Callback(回調)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#純粹函式-Pure-Functions-與副作用-Side-Effects-概念"><span class="toc-number">1.3.4.</span> <span class="toc-text">純粹函式(Pure Functions)與副作用(Side Effects)概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#副作用"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">副作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#純粹函式"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">純粹函式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#箭頭函式"><span class="toc-number">1.4.</span> <span class="toc-text">箭頭函式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#提升-Hoisting"><span class="toc-number">1.5.</span> <span class="toc-text">提升(Hoisting)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#解構賦值"><span class="toc-number">1.6.</span> <span class="toc-text">解構賦值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#陣列"><span class="toc-number">1.6.1.</span> <span class="toc-text">陣列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#物件"><span class="toc-number">1.6.2.</span> <span class="toc-text">物件</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Javascript 的一些觀念整理</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 發表於 2020-07-17<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新於 2020-07-17</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Javascript/">Javascript</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>字數總計:</span><span class="word-count">3.8k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>閲讀時長: 14 分鐘</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>閲讀量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="Javascript-觀念整理"><a href="#Javascript-觀念整理" class="headerlink" title="Javascript 觀念整理"></a>Javascript 觀念整理</h1><h2 id="塊級作用域"><a href="#塊級作用域" class="headerlink" title="塊級作用域"></a>塊級作用域</h2><p>Javascript  在 ES6 新增了塊級作用域，而盡可能不使用全域作用域。<br>優缺點如下：</p>
<p>全域作用域：  </p>
<ol>
<li>削弱了程式的彈性，盡量避免使用</li>
</ol>
<p>塊級作用域:<br>1.用大括號 {} 的情況下成立，沒有的話會報錯<br>2.外層無法讀取內層作用域的變數</p>
<h2 id="變數宣告"><a href="#變數宣告" class="headerlink" title="變數宣告"></a>變數宣告</h2><h3 id="ES5-var"><a href="#ES5-var" class="headerlink" title="ES5 var"></a>ES5 var</h3><p>1.函式作用域(function scope)。<br>2.有變數提升(hoisting)，就是在宣告之前可以使用，但值為 undefined。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(a);  //undefined</span><br><span class="line">var a = 1;</span><br></pre></td></tr></table></figure></div>
<p>3.透過 var 宣告 變數 i，在全域範圍內都有效，所以每次的循環，新的值 i 都會覆蓋掉舊值，導致輸出有問題。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (var i = 0; i &lt; 5; ++i) &#123;</span><br><span class="line">  setTimeout(function () &#123;</span><br><span class="line">    console.log(i);  // 5,5,5,5,5</span><br><span class="line">  &#125;, 100);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>4.區塊語句（if、else、 for、 while等）裡面用 var 宣告的變數，會洩漏到全域中。</p>
<h3 id="ES6-let-與-const"><a href="#ES6-let-與-const" class="headerlink" title="ES6 let 與 const"></a>ES6 let 與 const</h3><p>1.不可重複宣告。<br>2.只在宣告的塊級作用域內有效，只要是被所屬{ }包起來的let變數，都不會跑到外面(全域)。<br>3.不存在變數提升，只能宣告後使用。<br>4.若在定義變數之前使用該變數則會拋出 ReferenceError 錯誤。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = 3;  // ReferenceError</span><br><span class="line">let p;</span><br></pre></td></tr></table></figure></div>
<p>let 變數  </p>
<p>1.值會產生變動。</p>
<p>以下情況會因為 let 特性，重新綁定值，產生正確的輸出</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (let i = 0; i &lt; 5; ++i) &#123;</span><br><span class="line">  setTimeout(function () &#123;</span><br><span class="line">    console.log(i); //  0, 1, 2, 3, 4</span><br><span class="line">  &#125;, 100);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>const 常數</p>
<p>1.宣告時就立即給予值，不可之後再改變值(修改會報錯)。<br>實際上並不是變數的值不能改變，而是變數指向的內存位址不能被改變。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const a = [];</span><br><span class="line">a.push(&apos;Java&apos;);    // 可執行，此时a為[&apos;Java&apos;]</span><br><span class="line">a = [&apos;script&apos;];    // error</span><br></pre></td></tr></table></figure></div>
<p>上述例子中，因為在 JS 中陣列（array）和物件（object）都是屬於 reference type，因此實際上我們並沒有把這個常數指向（pointer）另一個東西，它仍然指稱到的是同一個記憶體位置。</p>
<p>2.可以用來宣告常數。為了方便區分哪些是常數那寫是變數，我們可以把常數在宣告的時候用大寫來表示。</p>
<h2 id="Function-函式"><a href="#Function-函式" class="headerlink" title="Function(函式)"></a>Function(函式)</h2><p>函式指的是將一或多段程式指令包裝起來，可以重複使用，也方便維護。而函式通常會有回傳值，使用 return 作為回傳值輸出，如果 return 後面還有程式碼，則不會被執行。因此，用 return 回傳空值也具有「中止」程式碼的功能。並非每種函式都有回傳值的需要，也有可能透過輸出的方式來將結果輸出。</p>
<p>函式是物件的一種，雖然用 typeof 去檢查的時候，得到 “function” 的結果，，但實際上它仍屬於 Object 的一種。</p>
<h3 id="函式組成"><a href="#函式組成" class="headerlink" title="函式組成"></a>函式組成</h3><p>1.函式的名稱(也可能沒有名稱)<br>2.在括號 ( ) 中的部分，稱為「參數 (arguments) 」，參數與參數之間會用逗號 , 隔開<br>3.在大括號 { } 內的部分，內含需要重複執行的內容，是函式功能的主要區塊。</p>
<p>Ps. arguments 是 JavaScript 預設的參數，可直接帶入，這種參數不須預先設定，所有函式都內建此參數，他會將呼叫函式所帶入的參數一並透過陣列的方式傳入。但 arguments 是類陣列，無法使用許多陣列相關的方式。</p>
<p>e.g. </p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const originCash = 1000;</span><br><span class="line">function updateEasyCard() &#123;</span><br><span class="line">  let cash = 0;</span><br><span class="line">  console.log(arguments); // 這裡可以看到 arguments 的結構</span><br><span class="line">  for (let i = 0; i &lt; arguments.length; i++) &#123;</span><br><span class="line">    cash += arguments[i];</span><br><span class="line">  &#125;</span><br><span class="line">  let money = cash + originCash;</span><br><span class="line">  console.log(&apos;我有 &apos; + money + &apos; 元&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">updateEasyCard(0); // 我有 1000 元</span><br><span class="line">// arguments = [];</span><br><span class="line"></span><br><span class="line">updateEasyCard(10, 50, 100, 50, 5, 1, 1, 1, 500); // 我有 1718 元</span><br><span class="line">// arguments = [10, 50, 100, 50, 5, 1, 1, 1, 500];</span><br></pre></td></tr></table></figure></div>
<p>語法：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><figcaption><span>name()&#123;&#125;```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">函式(Function) 分成 Function Statement(函式陳述句)與Function Expression(函式表達式、表示式)。</span><br><span class="line"></span><br><span class="line">&gt;Function Statement(函式陳述句)</span><br><span class="line"></span><br><span class="line">程式碼的單位，這段程式碼不會產生一個值。</span><br><span class="line"></span><br><span class="line">e.g.</span><br></pre></td></tr></table></figure></div>
<p>function greet(name){<br>    console.log(“Hello “ + name);<br>}</p>
<p>if(a === 3){<br>    console.log(a);<br>}<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;Function Expression(函式表達式、表示式)。</span><br><span class="line"></span><br><span class="line">會產生(回傳)一個值，但值不一定會被賦予變數。</span><br><span class="line"></span><br><span class="line">e.g.</span><br></pre></td></tr></table></figure></div></p>
<p>a = 3;  //  console.log 會回傳 3 </p>
<p>var greetFunc = function(name){<br>    console.log(“Hello “ + name);<br>}<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">有時函式需要一些特定資訊才能完成它的工作，因此宣告函式時需要再給予它參數。在這樣的函式中，參數的功能就有如變數。參數放置的位置，在函式名稱後面的小括號裡。參數可一至多個。</span><br><span class="line"></span><br><span class="line">函式也可以當作參數。</span><br><span class="line"></span><br><span class="line">e.g.</span><br></pre></td></tr></table></figure></div></p>
<p>function calc(a,b) {<br>    return a+b<br>}<br>console.log(calc(1,2)) //3<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 有加上名稱的函式</span><br><span class="line"></span><br><span class="line">函式呼叫方式是： 函式名稱加上括號()，以及在括號中傳入對應的參數值，即可呼叫這個函式執行。例如:</span><br></pre></td></tr></table></figure></div></p>
<p>function calc(a,b) {<br>    return a+b<br>}<br>console.log(calc(1,2)) //3<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 匿名函式</span><br><span class="line"></span><br><span class="line">通常會另外指定給一個變數/常數，被指定後這些變數/常數就成了函式的名稱。通常用在：</span><br><span class="line"></span><br><span class="line">1.當作其他函式的值傳入參數  </span><br><span class="line">2.一次性執行  </span><br><span class="line"></span><br><span class="line">語法：</span><br><span class="line"></span><br><span class="line">```function() &#123;&#125;</span><br></pre></td></tr></table></figure></div></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 函式表達式(FE)</span><br><span class="line">const calc = function(a,b) &#123;</span><br><span class="line">    return a+b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="立即函式-IIFE"><a href="#立即函式-IIFE" class="headerlink" title="立即函式(IIFE)"></a>立即函式(IIFE)</h3><p>立即執行程式碼，省略多餘的呼叫，用來分隔作用範圍，還可以用來避免汙染全域執行環境的東西，減少開發時因相同命名相衝的 bug。</p>
<p>語法：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 擇一使用就好</span><br><span class="line">(function () &#123;...&#125;)()</span><br><span class="line">(function () &#123;...&#125;())</span><br></pre></td></tr></table></figure></div>
<p>e.g.</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var hello = function(name)&#123;</span><br><span class="line">	console.log(&apos;Hello &apos; + name);</span><br><span class="line">&#125;(&apos;Simon&apos;);   //  Hello Simon</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(function(food)&#123;</span><br><span class="line">	console.log(&apos;大俠愛吃&apos; + food)</span><br><span class="line">&#125;(&apos;漢堡包&apos;));</span><br><span class="line"></span><br><span class="line">// 當 IIFE 和 全域環境有宣告相同變數名稱時，IIFE不會蓋掉全域的變數</span><br><span class="line">var seafood = &apos;波士頓龍蝦&apos;;</span><br><span class="line">(function(name)&#123;</span><br><span class="line">	var seafood = &apos;漢堡包&apos;;</span><br><span class="line">	console.log(name + &apos;好~想吃&apos; + seafood);</span><br><span class="line">&#125;(&apos;Simon&apos;)); // Simon好~想吃漢堡包</span><br></pre></td></tr></table></figure></div>
<h3 id="Callback-回調"><a href="#Callback-回調" class="headerlink" title="Callback(回調)"></a>Callback(回調)</h3><p>Callback(回調)其實跟一般函式沒什麼不同，差別在於被呼叫執行的時機。其實 Callback 就是把函式當作另一個函式的參數，然後在外部函式中調用該函式來完成某些事情</p>
<p>e.g.</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function a(callback) &#123;</span><br><span class="line">    setTimeout(function()&#123;</span><br><span class="line">        console.log(&apos;a&apos;);</span><br><span class="line">        callback();</span><br><span class="line">    &#125;,1000)</span><br><span class="line">&#125;</span><br><span class="line">function b() &#123;</span><br><span class="line">    console.log(&apos;b&apos;);</span><br><span class="line">&#125;</span><br><span class="line">a(b);  //把b()傳入a();</span><br><span class="line"></span><br><span class="line">//a</span><br><span class="line">//b</span><br></pre></td></tr></table></figure></div>
<h3 id="純粹函式-Pure-Functions-與副作用-Side-Effects-概念"><a href="#純粹函式-Pure-Functions-與副作用-Side-Effects-概念" class="headerlink" title="純粹函式(Pure Functions)與副作用(Side Effects)概念"></a>純粹函式(Pure Functions)與副作用(Side Effects)概念</h3><p>思考函式在使用上對外部環境造成的影響及效果。</p>
<h4 id="副作用"><a href="#副作用" class="headerlink" title="副作用"></a>副作用</h4><p>代表著可能更動到外部環境，或者更動到傳入的參數值。不代表好、壞，看產生的結果而定。</p>
<p>e.g.</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 有副作用 會改變值</span><br><span class="line">counter++</span><br><span class="line">x += 3</span><br><span class="line">y = &quot;Hello &quot; + name</span><br><span class="line"></span><br><span class="line">// 沒副作用 不改變值</span><br><span class="line">3 + 5</span><br><span class="line">true</span><br><span class="line">1.9</span><br><span class="line">x</span><br><span class="line">x &gt; y</span><br><span class="line">&apos;Hello World&apos;</span><br></pre></td></tr></table></figure></div>
<h4 id="純粹函式"><a href="#純粹函式" class="headerlink" title="純粹函式"></a>純粹函式</h4><p>純粹函式(pure function)</p>
<p>1.給定相同的輸入(傳入值)，一定會回傳相同輸出值結果(回傳值)。<br>2.不會產生副作用-不會改變原始輸入參數，或是外部環境。<br>3.不依賴任何外部的狀態(例如變數)。  </p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const sum = function(value1, value2) &#123;</span><br><span class="line">  return value1 + value2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>不純粹函式(impure function)</p>
<p>1.需要依賴外部的狀態值(變數值)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let count = 1;</span><br><span class="line"></span><br><span class="line">let increaseAge = function(value) &#123;</span><br><span class="line">  return count += value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="箭頭函式"><a href="#箭頭函式" class="headerlink" title="箭頭函式"></a>箭頭函式</h2><p>ES6的一種新語法，一般使用箭頭函式與 function 的用法大致一致，可以傳入參數、也有大括號包起來，除此之外箭頭函式也有更簡短的寫法，有以下幾種特性。</p>
<p>1.若只有單一行陳述可不加花括號<code>{}</code>，也不用寫 return，預設就有，但如果有<code>{}</code>是需要自行加入 return，如果沒有傳入值則會出現 undefined。</p>
<p><code>let calc = (x,y) =&gt; (x+y);</code></p>
<p>2.只有一個參數可以不加括號。</p>
<p><code>let callSomeone = someone =&gt; someone + &#39;吃飯了&#39;</code></p>
<p>3.沒有參數時，一定要有括號。</p>
<p><code>let callSomeone = () =&gt; &#39;小明&#39; + &#39;吃飯了&#39;</code></p>
<p>4.沒有 arguments 參數<br>5.綁定的 this 不同</p>
<p>傳統函式：依呼叫的方法而定<br>箭頭函式：綁定到其定義時所在的物件，箭頭函式可以取代 ES5 使用var self = this 或 .bind(this)的情況，它可以綁定 this 變數。但有時情況較特殊，要視情況而定，而不是每種情況都可以用箭頭函式來取代。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">var name = &apos;全域阿婆&apos;</span><br><span class="line">var auntie = &#123;</span><br><span class="line">  name: &apos;漂亮阿姨&apos;,</span><br><span class="line">  callName: function () &#123; </span><br><span class="line">    // 注意，這裡是 function，以此為基準產生一個作用域</span><br><span class="line">    console.log(&apos;1&apos;, this.name); // 1 漂亮阿姨</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      console.log(&apos;2&apos;, this.name); // 2 漂亮阿姨</span><br><span class="line">      console.log(&apos;3&apos;, this); // 3 auntie 這個物件</span><br><span class="line">    &#125;, 10);</span><br><span class="line">  &#125;,</span><br><span class="line">  callName2: () =&gt; &#123; </span><br><span class="line">    // 注意，如果使用箭頭函式，this 依然指向 window</span><br><span class="line">    console.log(&apos;4&apos;, this.name); // 4 全域阿婆</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      console.log(&apos;5&apos;, this.name); // 5 全域阿婆</span><br><span class="line">      console.log(&apos;6&apos;, this); // 6 window 物件</span><br><span class="line">    &#125;, 10);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">auntie.callName();</span><br><span class="line">auntie.callName2();</span><br></pre></td></tr></table></figure></div>
<p>一般函式在建立時是在 window 下，所以在 window 下使用箭頭函式自然會指向 window，要確實將箭頭函式宣告在物件內部，這樣 this 才會指向該物件。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var func = function () &#123;</span><br><span class="line">  var func2 = function () &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      console.log(this); </span><br><span class="line">    &#125;, 10);</span><br><span class="line">  &#125;;</span><br><span class="line">  // 這裡才算真正的建立一個物件</span><br><span class="line">  // 因此要在此物件下的箭頭函式才會以此作為基準</span><br><span class="line">  var func3 = &#123;</span><br><span class="line">    func: func2,</span><br><span class="line">    var4: 4</span><br><span class="line">  &#125;</span><br><span class="line">  func2(); // this = window</span><br><span class="line">  func3.func(); // func3 Object</span><br><span class="line">&#125;</span><br><span class="line">func(); </span><br><span class="line">// 就算在這裡新增一個 function，也不會影響到內層的箭頭函式</span><br><span class="line">// func() 是最外層的函式，他對於內層的箭頭不會有影響。</span><br><span class="line">// func2() 是包覆在內層的函式，但由於箭頭函式不是在物件內，所以沒有影響。</span><br><span class="line">// func3() 是呼叫在物件內的函式，因此箭頭函式會是使用它所在的物件。</span><br></pre></td></tr></table></figure></div>
<p>注意：如果 不是 建立在物件內的函式，並不會影響箭頭函示的 this</p>
<p>6.縮寫的函式</p>
<p>不可以使用箭頭函式的情況</p>
<p>1.call、apply、bind 這三個方法，無法覆蓋箭頭函式中的this值</p>
<p>this 在 Arrow function 中是被綁定的，所以套用 call 的方法時是無法修改 this。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let family = &#123;</span><br><span class="line">  ming: &apos;小明&apos;</span><br><span class="line">&#125;</span><br><span class="line">const func = () =&gt; &#123;</span><br><span class="line">  console.log(this);</span><br><span class="line">&#125;</span><br><span class="line">const func2 = function () &#123;</span><br><span class="line">  console.log(this);</span><br><span class="line">&#125;</span><br><span class="line">func.call(family); // 箭頭函式的情況，this 依然是 window</span><br><span class="line">func2.call(family); // 一般函示 this 則是傳入的物件</span><br></pre></td></tr></table></figure></div>
<p>2.不能用在建構式</p>
<p>由於 this 的是在物件下建立，所以箭頭函式不能像 function 一樣作為建構式的函式，如果嘗試使用此方法則會出現錯誤。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const PhoneTemplate = (brand, modal, withCamera) =&gt; &#123;</span><br><span class="line">  this.brand = brand;</span><br><span class="line">  this.modal = modal;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const sonyPhone = new PhoneTemplate(&apos;Sony&apos;, &apos;Z100&apos;, true);</span><br><span class="line">// 錯誤：PhoneTemplate is not a constructor</span><br></pre></td></tr></table></figure></div>
<p>3.DOM 事件監聽  </p>
<p>如果是用在監聽 DOM 上一樣會指向 window，所以無法使用在此情境。</p>
<p>4.Prototype 中使用 this</p>
<p>一樣是 this 的問題，如果原型上新增一個箭頭函式，並嘗試使用 this 的話會指向全域。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function PhoneTemplate (brand, modal, withCamera) &#123;</span><br><span class="line">  this.brand = brand;</span><br><span class="line">  this.modal = modal;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PhoneTemplate.prototype.callSomeone = function (someone) &#123;</span><br><span class="line">  console.log(this.brand + &apos; 打通電話給 &apos; + someone)</span><br><span class="line">&#125;</span><br><span class="line">PhoneTemplate.prototype.callSomeone2 = (someone) =&gt; &#123;</span><br><span class="line">  console.log(this.brand + &apos; 打通電話給 &apos; + someone)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const sonyPhone = new PhoneTemplate(&apos;Sony&apos;, &apos;Z100&apos;, true);</span><br><span class="line">sonyPhone.callSomeone(&apos;小明&apos;); // Sony 打通電話給 小明</span><br><span class="line">sonyPhone.callSomeone2(&apos;杰哥&apos;); // undefined 打通電話給 杰哥</span><br></pre></td></tr></table></figure></div>
<p>ps.物件函式綁定 this，過去我們在寫物件內的函式時，為了確保 this 能夠正確運作會先將它賦予在另一個變數上 (that, self, vm…)。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var auntie = &#123;</span><br><span class="line">  name: &apos;漂亮阿姨&apos;,</span><br><span class="line">  callName () &#123; </span><br><span class="line">    // 先使用另一個變數指向 this，讓內層函式可以正確使用</span><br><span class="line">    var that = this;</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      console.log(that); // auntie 這個物件</span><br><span class="line">    &#125;, 10);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">auntie.callName();</span><br></pre></td></tr></table></figure></div>
<p>箭頭函式本就會指向他所生成的物件上，所以可以不需要另外指向另一個物件。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var auntie = &#123;</span><br><span class="line">  name: &apos;漂亮阿姨&apos;,</span><br><span class="line">  callName () &#123; </span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">		// 箭頭函式中會自動指向生成的物件上</span><br><span class="line">      console.log(this); // auntie 這個物件</span><br><span class="line">    &#125;, 10);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">auntie.callName();</span><br></pre></td></tr></table></figure></div>
<h2 id="提升-Hoisting"><a href="#提升-Hoisting" class="headerlink" title="提升(Hoisting)"></a>提升(Hoisting)</h2><p>編譯器在編譯時期會先找出所有的變數並綁定所屬範疇，但不賦值，所以此刻變數所帶的值是 undefined；而在執行階段，JavaScript 引擎才會處理給值的事情。可以想成是把這些變數和函式「提升」到程式碼的最頂端。</p>
<p>變數與函式的拉升的不同之處在於，變數的拉升只有宣告部份，而函式的拉升是整個函式，因此函式在宣告前是可以執行的。</p>
<p>e.g.</p>
<p>變數</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(a); // undefined</span><br><span class="line">var a = 2;</span><br></pre></td></tr></table></figure></div>
<p>編譯過程</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a; // Hoisting，編譯時期確認 a 屬於全域範疇，但不賦值，所以此刻變數所帶的值是 undefined</span><br><span class="line"></span><br><span class="line">console.log(a); // 執行時期 得到 undefined</span><br><span class="line">a = ？; // 執行時期 才會知道 a 的值是什麼</span><br></pre></td></tr></table></figure></div>
<p>函式</p>
<p>以下例子，因為 Hoisting 效果，會將 calc 函式拉到執行時期的前面，所以可以正常使用</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 函式陳述式</span><br><span class="line">calc(1,2)  //3</span><br><span class="line">function calc(x,y)&#123;</span><br><span class="line">   return (x+y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>編譯過程</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function calc(x,y)&#123;</span><br><span class="line">   return (x+y)</span><br><span class="line">&#125;</span><br><span class="line">calc(1,2)  //3</span><br></pre></td></tr></table></figure></div>
<p>但若是使用函式表達式，就只有變數名稱被提升，並非整個函式提升，則會產生錯誤。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 函式表達式</span><br><span class="line">calc(1,2)  //  calc is not a function</span><br><span class="line">let calc = function(x,y) &#123;</span><br><span class="line">   return (x+y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>編譯過程</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let calc;</span><br><span class="line"></span><br><span class="line">calc(1,2)  //  TypeError</span><br><span class="line">let calc = function(x,y) &#123;</span><br><span class="line">   return (x+y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>重複宣告</p>
<p>若函式和變數同名，則函式會優先；若同時有多個函式同名，則後面的會覆寫前面的宣告。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">foo(); // 1</span><br><span class="line"></span><br><span class="line">var foo;</span><br><span class="line"></span><br><span class="line">function foo() &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo = 2;</span><br><span class="line"></span><br><span class="line">看成</span><br><span class="line"></span><br><span class="line">function foo() &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(); // 1</span><br><span class="line"></span><br><span class="line">foo = 2;</span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">foo(); // 3</span><br><span class="line"></span><br><span class="line">function foo() &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function foo() &#123;</span><br><span class="line">  console.log(2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function foo() &#123;</span><br><span class="line">  console.log(3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="解構賦值"><a href="#解構賦值" class="headerlink" title="解構賦值"></a>解構賦值</h2><p>ES6 的新特性之一，用於提取陣列或物件中的資料。</p>
<p>用來賦值的等號左邊寫變數或是常數，右邊要寫上對應的數值，就像鏡子ㄧ樣左右對應，若沒有對應的值時，則會得到 undefined。</p>
<h3 id="陣列"><a href="#陣列" class="headerlink" title="陣列"></a>陣列</h3><p>基本使用</p>
<p><code>const [a,b] = [1,2]  //a=1,b=2</code></p>
<p>先宣告後指定</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let a,b</span><br><span class="line">[a,b] = [1,2]</span><br></pre></td></tr></table></figure></div>
<p>略過</p>
<p><code>const [a,,b] = [1,2,3] //a=1,b=3</code></p>
<p>字串</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const str = &quot;good&quot;;</span><br><span class="line">const [a, b, c, d] = str</span><br><span class="line">console.log(a,b,c,d) //g,o,o,d</span><br></pre></td></tr></table></figure></div>
<p>其餘運算</p>
<p><code>const [a, ...b] = [1, 2, 3] //a=1, b=[2,3]</code></p>
<p>沒相對應的情況</p>
<p><code>const [, , , a, b] = [1, 2, 3] // a=undefined, b=undefined</code></p>
<h3 id="物件"><a href="#物件" class="headerlink" title="物件"></a>物件</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let data = &#123;</span><br><span class="line">    name: &apos;joyce&apos;,</span><br><span class="line">    height: &apos;180&apos;,</span><br><span class="line">    sex: &apos;female&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>直接對應相同名稱</p>
<p><code>let {name,height,sex} = data</code></p>
<p>基本用法</p>
<p><code>const { id:x } = {id:1} // x=1</code></p>
<p>屬性賦值</p>
<p><code>const { data1:data1,data2:data2 } = { data1:100,data2:200 } //data1=100,data2=200</code></p>
<p>屬性賦值縮寫</p>
<p><code>const { data1,data2 } = { data1:100,data2:200 }
// {data1} = {data1:data1}</code></p>
<p>參考：<br><a href="https://pjchender.blogspot.com/2017/01/const.html" target="_blank" rel="noopener">https://pjchender.blogspot.com/2017/01/const.html</a><br><a href="https://ithelp.ithome.com.tw/articles/10192146" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/articles/10192146</a><br><a href="https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/part4/arrow_function.html" target="_blank" rel="noopener">https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/part4/arrow_function.html</a><br><a href="https://ithelp.ithome.com.tw/articles/10193313" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/articles/10193313</a><br><a href="https://ithelp.ithome.com.tw/articles/10191549" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/articles/10191549</a><br><a href="https://ithelp.ithome.com.tw/articles/10185780" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/articles/10185780</a><br><a href="https://cythilya.github.io/2018/10/20/hoisting/" target="_blank" rel="noopener">https://cythilya.github.io/2018/10/20/hoisting/</a><br><a href="https://wcc723.github.io/javascript/2017/12/21/javascript-es6-arrow-function/" target="_blank" rel="noopener">https://wcc723.github.io/javascript/2017/12/21/javascript-es6-arrow-function/</a><br><a href="https://wcc723.github.io/javascript/2017/12/14/javascript-arguments/" target="_blank" rel="noopener">https://wcc723.github.io/javascript/2017/12/14/javascript-arguments/</a></p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Javascript/">Javascript    </a></div><div class="post_share"></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/07/17/Javascript-Execution-context/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>JavaSript 執行環境(Execution_context)與堆疊</span></div></a></div><div class="next-post pull_right"><a href="/2020/07/17/Object-key-value/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>物件(Object)資料處理</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相關推薦</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/07/17/Object-key-value/" title="物件(Object)資料處理"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-07-17</div><div class="relatedPosts_title">物件(Object)資料處理</div></div></a></div></div><div class="clear_both"></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By jerry wu</div><div class="framework-info"><span>Power by </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="閲讀模式"></i><i class="fa fa-plus" id="font_plus" title="放大字體"></i><i class="fa fa-minus" id="font_minus" title="縮小字體"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="簡繁轉換" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜間模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="設置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目錄" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到頂部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script></body></html>